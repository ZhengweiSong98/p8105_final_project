---
title: "Data proprecessing"
output: 
  html_document: 
    toc: yes
    toc_float: yes
editor_options: 
  chunk_output_type: console
---

```{r include = F}
library(tidyverse)
library(tidytext)  
library(ggplot2)
library(httr)
library(rvest)
library(lubridate)
library(plotly)
library(patchwork)
library(lmtest)
```

```{r source, r, include = F}
source("data_preprocessing_backbone.R")
```

Begin the data processing procedure by loading all of the interested dataframes from the internet, including "Age.csv", "Demo.csv","16-plus.csv", "12-plus.csv", and "Post_stat.csv".

"Age.csv" originally includes covid data related to multiple demographic groups including age group, race ethnicity, and gender. Thus, we decide to separate it into three distinct data freames, each describing on one demographic group. We also arranged the sequence of the columns by moving the 'date' variable in front of other variables to better match the sequence of other data frames in this study.

"Demo.csv" contains covid data of different demographic areas, mainly the different counties in the state of California, but it also includes covid data for the whole states. For our purposes, we decide to focus our analysis on comparing the covid data in different counties. Thus we decide to drop any rows with the area type of state. Then, delete the column "area_type"" and rename the column "area"" to "county_name". We also decide to focus our analysis on the cumulative covid data instead of the changes per day. Thus we delete some columns including "total_test", "positive_test", "reported_cases", "reported_deaths", and "reported_tests". Lastly, drop all of the rows containning N/A values.

"16-plus.csv", "12-plus.csv", "Post_stat.csv" includes legacy table about covid-19 status based on previous separation between standard vaccinated and boosted groups, with restriction on the age group above 16, above 12, and no restriction respectively. Since the "AREA" and "AREA_TYPE" columns contain the exact information throughout all of these data frames, it is not valuable for our purpose and thus we remove them. We also removed six data rows before the date 2021/2/7 due to missing data in the "12-plus.csv" and "Post_stat.csv".
